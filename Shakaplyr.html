<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shaka Player with Seek Bar and Fullscreen</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.8.1/shaka-player.ui.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.8.1/controls.min.css" />
  <style>
    body {
      margin: 0;
      background: #000;
      display: flex;
      align-items: center;
      justify-content: center;
      height: 100vh;
    }
    .video-container {
      position: relative;
      width: 90%;
      max-width: 960px;
      aspect-ratio: 16 / 9;
      background: #111;
    }
    video {
      width: 100%;
      height: 100%;
      outline: none;
    }

    .shaka-seek-bar-container {
      height: 16px !important;
    }
    .shaka-seek-bar {
      background-color: #444 !important;
      height: 6px !important;
      border-radius: 3px !important;
    }
    .shaka-played-segment {
      background-color: #0af !important;
      height: 6px !important;
      border-radius: 3px !important;
    }
  </style>
</head>
<body>
  <div class="video-container" id="video-container">
    <video id="video" autoplay playsinline></video>
  </div>

  <script>
    const video = document.getElementById("video");
    const container = document.getElementById("video-container");
    const urlParams = new URLSearchParams(window.location.search);

    const manifestUri =
      urlParams.get("url") ||
      "https://storage.googleapis.com/shaka-demo-assets/angel-one/dash.mpd";

    function initApp() {
      shaka.polyfill.installAll();

      if (!shaka.Player.isBrowserSupported()) {
        alert("Browser not supported!");
        return;
      }

      const player = new shaka.Player(video);
      const ui = new shaka.ui.Overlay(player, container, video);

      ui.configure({
        controlPanelElements: [
          "play_pause",
          "mute",
          "volume",
          "seek_bar",
          "time_and_duration",
          "fullscreen",
          "overflow_menu",
        ],
        overflowMenuButtons: ["quality", "language", "playback_rate", "captions"],
        addBigPlayButton: true,
      });

      player.addEventListener("error", (e) => {
        console.error("Error code", e.detail.code, e.detail);
        alert("Error: " + e.detail.message);
      });

      player.load(manifestUri).then(() => {
        console.log("The video has now been loaded!");
      });
    }

    document.addEventListener("DOMContentLoaded", initApp);
  </script>
</body>
</html>
